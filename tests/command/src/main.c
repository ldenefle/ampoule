/**
 * @file main
 * @author Lucas Denefle - ldenefle@gmail.com
 * @date 2023-12-15 14:05:20
 * @brief
 *
 */

/******************************************************************************/
/* Includes                                                                   */
/******************************************************************************/
#include <zephyr/ztest.h>
#include "ampoule/command.h"
#include "command.pb.h"

/******************************************************************************/
/* Local Constant, Macro and Type Definitions                                 */
/******************************************************************************/

/******************************************************************************/
/* Local Function Prototypes                                                  */
/******************************************************************************/

/******************************************************************************/
/* Local Variable Definitions                                                 */
/******************************************************************************/

/******************************************************************************/
/* Global Function Definitions                                                */
/******************************************************************************/
ZTEST(command_tests, test_command_process)
{
	Command command;
	command.opcode = Opcode_PING;
	Response response;
	zassert_ok(command_process(&command, &response));

	zassert_true(response.opcode == Opcode_PONG);
}

/******************************************************************************/
/* Local Function Definitions                                                 */
/******************************************************************************/

ZTEST_SUITE(command_tests, NULL, NULL, NULL, NULL, NULL);
